<!DOCTYPE html>
<html>
<head>
    <!--
# Copyright (C) 2017 NOUCHET Christophe
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License along
# with this program. If not, see <http://www.gnu.org/licenses/>.

# Author: Christophe Nouchet
# Email: nouchet.christophe@gmail.com
# Date: 23/03/2017
-->
    <title>Processes</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="/js/jquery-3.2.0.min.js"></script>
    <link rel="stylesheet" href="/js/bootstrap.min.css" />
    <link rel="stylesheet" href="/js/bootstrap-theme.min.css" />
    <script src="/js/bootstrap.min.js"></script>


</head>
<body>
    <div class="container">
        <div class="header clearfix">
            <nav>
                <ul class="nav nav-pills pull-right">
                    <li role="presentation"><a href="/">Home</a></li>
                    <li role="presentation"><a href="/view/monitor">Monitoring</a></li>
                    <li role="presentation"><a href="#">Sessions</a></li>
                    <li role="presentation"><a href="#">Contact</a></li>
                </ul>
            </nav>
            <h3 class="text-muted">Mâat</h3>
        </div>

        <div class="row">
            <div class="col-lg-12" style="text-align: center">
                <h1>Maat Processes</h1>
            </div>
            <div class="col-lg-12" style="margin-top: 2%;">
                <div class="col-lg-12" style="text-align: center; margin-top: 2%;">
                    <table id="mytable" style="width: 100%">
                        <thead>
                            <tr>
                                <th>Backend</th>
                                <th>Project</th>
                                <th>CPU (%)</th>
                                <th>Memory (GB)</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for backend, processes in backends.items() %}
                            {% if processes|length > 0 %}
                            {% for process in processes %}
                            <tr>
                                <td><a href="/redirect/{{ backend }}">{{ backend }}</a></td>
                                <td><a href="/redirect/{{ backend }}">{{ process['cwd'] }}</a></td>
                                <td>{{ process['cpu_percent'] }}</td>
                                <td>{{ process['memory_info']['rss'] / 1000000000 }}</td>
                            </tr>
                            {% endfor %}
                            {% endif %}
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="col-lg-12" style="text-align: center; margin-top: 2%;">
                <!--
                <p>{{ backends }}</p>
                <p>{% for backend, processes in backends.items() %}
                    <a href="/redirect/{{ backend }}">{{ backend }}</a><br />
                    <a href="/redirect/{{ backend }}">{{ processes['cwd'] }}</a><br />
                    {{ processes['cpu_percent'] }}<br />
                    {{ processes['memory_percent'] }}<br />
                    <br />
                    <br />
                {% endfor %}</p>
                -->
                <h2><a href="/add_session">Create a new session</a></h2>
            </div>
        </div>

        <footer class="footer" style="margin-top: 5%;">
            <p>&copy; 2017 Maât</p>
        </footer>
    </div> <!-- /container -->
</body>
</html>

